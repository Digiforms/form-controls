function addJSFiles(){var e=document.createElement("script");e.type="text/javascript",e.src="../form-controls/js-webshim/minified/polyfiller.js",$("head").append(e);var t=document.createElement("script");t.type="text/javascript",t.src="../form-controls/jquery.mask.min.js",$("head").append(t)}function initWebshims(){webshims.polyfill("forms")}function preventBrowserFormActions(){$("#frm").attr("novalidate","novalidate")}function initGlobalKeyEventListener(){ctrlDown=!1,$(document).on("keydown",function(e){17==(e.which||e.keyCode)&&(ctrlDown=!0)}),$(document).on("keyup",function(e){17==(e.which||e.keyCode)&&(ctrlDown=!1)}),shiftDown=!1,$(document).on("keydown",function(e){16==(e.which||e.keyCode)&&(shiftDown=!0)}),$(document).on("keyup",function(e){16==(e.which||e.keyCode)&&(shiftDown=!1)}),tabDown=!1,$(document).on("keydown",function(e){9==(e.which||e.keyCode)&&(tabDown=!0)}),$(document).on("keyup",function(e){9==(e.which||e.keyCode)&&(tabDown=!1)})}function addHTMLAttributes(){$("input.numeric-text").attr("inputmode","numeric"),$("input.numeric-text").attr("pattern","[0-9]*"),$(".numeric-decimal").attr("step","0.01"),$(".numeric-positive").attr("min","0")}function initInputs(){addHTMLAttributes(),$("input.numeric-text:not(.account-mask, .vps-account-mask, .money, .org-number-mask, org-number-mask-se, org-number-mask-dk, .cpr-mask, .date-mask, .phone, .phone-no, .letteral-text, .ssn-no-mask, .percentage)").mask("0#"),$("input.phone").mask("+099999 000 00 000 000 00 000 00"),$("input.phone-no").mask("+47 000 00 000"),$("input.account-mask").mask("0000 00 00000"),$("input.vps-account-mask").mask("00000 0000000"),$("input.money").mask("000 000 000 000 000",{reverse:!0,watchDataMask:!0}),$("input.org-number-mask").mask("000 000 000"),$("input.org-number-mask-se input.cpr-mask").mask("000000-0000"),$("input.org-number-mask-dk").mask("00000000"),$("input.ssn-no-mask").mask("000000 00000"),$("input.date-mask").mask("00.00.0000"),$("input.letteral-text").mask("ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ",{translation:{Z:{pattern:/[a-zA-Z ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏàáâãäåæçèéêëìíîïÐÑÒÓÔÕÖØÙÚÛÜÝÞßðñòóôõöøùúûüýþÿ-]/}}}),$.each($("input.website-mask"),function(){""===$(this).val()&&$(this).val("www.")}),$("input.website-mask").mask("www.ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ",{translation:{Z:{pattern:/[\w@\-.+\/]/,recursive:!0}}}),$("input.percentage").mask("HT9,00",{translation:{H:{pattern:/[1]/,optional:!0},T:{pattern:/[0-9]/,optional:!0}},watchDataMask:!0});var e=function(e){return parseFloat(e.toString().replace(",","."))};$("#frm").on("input",".percentage",function(){e($(this).val())>100?$(this).val(100):0===$(this).val().indexOf("0")&&2===$(this).val().indexOf(",")&&$(this).val($(this).val().substring(1))}),$("#frm").on("keydown",".percentage, .money",function(t){var n=t.which||t.keyCode,a=e($(this).val()),o=.01,i="0,00",r=100,s=2;$(this).hasClass("money")&&(o=1,i="0",r=999999999999999,s=0,a=parseFloat($(this).cleanVal())),38===n&&(""===$(this).val()||a<r)?(""===$(this).val()?$(this).val($(this).masked(i)):$(this).val($(this).masked((a+o).toFixed(s))),t.preventDefault(),$(this).trigger("input")):40===n&&(""===$(this).val()||a>0)&&(""===$(this).val()?$(this).val($(this).masked(i)):$(this).val($(this).masked((a-o).toFixed(s))),t.preventDefault(),$(this).trigger("input"))});var t=function(e,t,n){return!!((n||!shiftDown)&&e>=48&&e<=57||e>=96&&e<=105||void 0!=t&&$.inArray(e,t)>-1)},n=function(e){return 46==(e.which||e.keyCode)},a=function(e){return 8==(e.which||e.keyCode)},o=function(e){return a(e)||n(e)},i=function(e){if(ctrlDown)return!0;var t=e.which||e.keyCode;return!(!o(e)&&9!=t&&13!=t&&16!=t&&17!=t&&19!=t&&(t<35||t>40))};$("#frm").on("keydown","input.numeric-decimal",function(e){var n=e.which||e.keyCode;i(e)||t(n,[188,190],!1)||e.preventDefault()}),$("#frm").on("keyup","input.prevent-select-on-tab",function(e){9==(e.which||e.keyCode)&&$(this).prop("selectionStart",$(this).prop("selectionEnd"))}),$("#frm").on("focus","input.prevent-select-on-tab",function(e){(tabDown||$(this).prop("selectionStart")!=$(this).prop("selectionEnd"))&&$(this).prop("selectionStart",$(this).prop("selectionEnd"))})}function initCheckBoxesAndRadios(){$("#frm").on("click",".control-row .label_control",function(e){if("input"!=e.target.localName){var t=$(this).find("input");t.length&&(t.click(),t.focus())}}),$("#frm").on("change",".control-row .label_control input:checkbox",function(){toggleCheck($(this))}),$("#frm").on("change",".control-row .label_control input:radio",function(){var e=$(this).closest("fieldset").find("input:radio");$.each(e,function(){toggleCheck($(this))})}),$("#frm").on("focus",".control-row .label_control input",function(){$(this).parent().parent().addClass("focused")}),$("#frm").on("blur",".control-row .label_control input",function(){$(this).parent().parent().removeClass("focused")}),$("#frm").on("change",".control-row .label_control input",function(){$(this).is(":checked")&&$(this).closest("fieldset").parent().find(".digiforms_validation_message:not(.file-error):first").hide()}),initCheckedInputs(),calcCheckAndRadioPlacment(),$(window).resize(function(){calcCheckAndRadioPlacment()})}function toggleCheck(e){e.is(":checked")?e.closest(".label_control").addClass("checked"):e.closest(".label_control").removeClass("checked")}function initCheckedInputs(){var e=$(".label_control input:checkbox:checked");$.each(e,function(){toggleCheck($(this))});var t=$(".label_control input:radio");$.each(t,function(){toggleCheck($(this))})}function calcCheckAndRadioPlacment(){$.each($(".control-row .label_control input"),function(){var e=$(this).parent(),t=e.siblings(".label_text"),n=parseFloat(t.css("font-size").replace("px",""));e.height()<=t.height()&&t.height()>=2*n?e.parent().addClass("align-top"):e.parent().hasClass("align-top")&&e.parent().removeClass("align-top")})}function initFloatingLabels(){initFloatingLabelsLoaded(),$("#frm").on("input",".label-float .input-field-alt",function(){showLabel($(this))}),$("#frm").on("keyup",".label-float .input-field-alt",function(){hideLabel($(this))}),$(window).resize(function(){$.each($(".label-float .input-field-alt"),function(){togglePaddingTop($(this))})})}function initFloatingLabelsLoaded(){var e=function(e){showLabel(e)||hideLabel(e)},t=function(e){var t=getLabel(e).find("label").text();e.attr("placeholder")!=t&&e.attr("placeholder",t)};$.each($(".label-float .input-field-alt"),function(){e($(this)),t($(this)),togglePaddingTop($(this))})}function showLabel(e){var t=getLabel(e);return!(!e.val().length||!t.hasClass("hidden"))&&(t.removeClass("hidden"),togglePaddingTop(e),!0)}function hideLabel(e){var t=getLabel(e);return 0==e.val().length&&!t.hasClass("hidden")&&(t.addClass("hidden"),togglePaddingTop(e),!0)}function getLabel(e){return e.parent().parent()}function togglePaddingTop(e){var t=getLabel(e);if(t.hasClass("hidden"))e.attr("style","padding-top: calc(1.2rem + 3px) !important");else{var n=t.find("label").outerHeight();$(e).attr("style","padding-top: calc("+n+"px + 3px) !important")}}function getXMLData(e,t){$.ajax({type:"GET",url:e,dataType:"text",cache:!1,xhr:function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},success:function(e){t(e)}})}function getComboboxList(e){var t=["Banan","Eple","Plomme"],n=["Offentlig myndighet","Bank, finans og forsikring","Juridiske tjenester","IT og telekommunikasjon","Eiendom","Media, avis, markedsføring og salgstjenester","Butikk og varehandel","Reiseliv / hotell","Industri","Bygg og anlegg","Import og eksport av varer og tjenester","Håndverkertjenester","Kunst- og antikvitetshandel","Transport og logistikk","Restauranter, mat og uteliv","Urmaker / gullsmed","Bil, kjøretøy og verkstedstjenester","Tro og religiøse-, frivillige-, veldedige-, humanitære- og ideelle organisasjoner","Helse / omsorg / medisin og biologi / dyrehelse","Jord- / skogbruk, fiske og matproduksjon","Kultur og idrett","Service og sikkerhet","Skole, fritid, undervisning og forskning","Arkitektur og interiør","Økonomi og regnskap"];return e.hasClass("combobox-countries")?countries:e.hasClass("combobox-sector")?n:t}function getCorrespondingResults(e){return e.parent().siblings(".combobox-results-container").children(".combobox-results")}function getResultItemMarkup(e,t){return'<li role="option" aira-selected="false" class="combobox-result" id="combobox-result-'+t+'">'+e+"</li>"}function initComboboxes(){function e(e){return!e.hasClass("hidden")&&(e.scrollTop(0),e.addClass("hidden"),e.parent().siblings(".combobox-wrap").attr("aria-expanded","false"),i(e),!0)}function t(e){return!!e.children().length&&(e.parent().siblings(".combobox-wrap").attr("aria-expanded","true"),e.removeClass("hidden"),!0)}function n(n){t(n)||e(n)}function a(e){return!(!e||!e.length)&&(e.attr("aria-selected","false"),e.removeClass("highlighted"),e.closest(".combobox-container").find(".combobox").attr("aria-activedescendant",""),!0)}function o(e){return a(e.siblings(".highlighted")),!(!e||!e.length)&&(e.attr("aria-selected","true"),e.addClass("highlighted"),e.closest(".combobox-container").find(".combobox").attr("aria-activedescendant",e.attr("id")),!0)}function i(e){a(e.children(".highlighted"))||e.closest(".combobox-container").find(".combobox").attr("aria-activedescendant","")}function r(e){return 40==e.which}function s(e){return 38==e.which}function l(e){return 13==e.which}function c(e){return 27==e.which}function u(t){var n=t.closest(".combobox-container").find("input.combobox");n.val(t.text()),n.hasClass("combobox-countries")&&n.attr("data-value",countryCodeLookup[n.val()]);var a=t.parent();e(a);var o=t.closest(".combobox-container").find("label");n.isInViewport()||$("html, body").animate({scrollTop:o.offset().top},100),a.empty(),n.change()}function d(e){e.val(""),e.removeAttr("data-value"),e.hasClass("combobox-strict")&&addAllResultsToComboboxList(e),e.change()}buildComboboxes(),$("#frm").on("input","input.combobox",function(){if($(this).is(":focus")){var e=$(this).val().toLowerCase(),t=getCorrespondingResults($(this));if(t.empty(),e.length){var a=getComboboxList($(this)),i=[],r=function(e,t,n){return e.substring(0,t)+'<span class="case-match">'+e.substring(t,n)+"</span>"+e.substring(n,e.length)},s=0;$.each(a,function(n,a){var o=a.toLowerCase().indexOf(e);0==o?t.append(getResultItemMarkup(r(a,0,e.length),++s)):o>0&&i.push(r(a,o,o+e.length))}),t.children().length||$.each(i,function(e,n){t.append(getResultItemMarkup(n,++s))}),$(this).hasClass("combobox-strict")&&o(getCorrespondingResults($(this)).children().first())}else $(this).hasClass("combobox-strict")&&addAllResultsToComboboxList($(this));n(t)}}),$("#frm").on("blur","input.combobox",function(){var t=getCorrespondingResults($(this));if($(this).hasClass("combobox-strict")){var n=t.children(".highlighted").first();n.length?u(n):$.inArray($(this).val(),getComboboxList($(this)))<0&&d($(this))}e(t)}),$("#frm").on("focus","input.combobox",function(){($(this).hasClass("combobox-strict")||$(this).val().length)&&t(getCorrespondingResults($(this)))}),$("#frm").on("click","input.combobox",function(){i(getCorrespondingResults($(this)))}),$("#frm").on("keydown","input.combobox",function(n){var i=getCorrespondingResults($(this));if(i.hasClass("hidden"))r(n)&&(""==$(this).val()&&addAllResultsToComboboxList($(this)),t(i));else if(r(n)){var d=i.children(".combobox-result"),h=d.filter(".highlighted");if(h.length){var m=h.next();if(o(m)){var p=i.offset().top,f=i.offset().top+parseFloat(i.css("max-height").replace("px","")),g=m.offset().top,b=m.offset().top+m.outerHeight(),Z=i.scrollTop();g>f||g<p?i.scrollTop(Z+g-p):b>f&&i.scrollTop(Z+m.outerHeight())}else a(h),i.scrollTop(0)}else{var k=d.first();o(k),i.scrollTop()>0&&i.scrollTop(k.offset().top)}n.preventDefault()}else if(s(n)){var d=i.children(".combobox-result"),h=d.filter(".highlighted");if(h.length){var v=h.prev();if(o(v)){var p=i.offset().top,f=i.offset().top+parseFloat(i.css("max-height").replace("px","")),g=v.offset().top,b=v.offset().top+v.outerHeight(),Z=i.scrollTop();g<0||b>f?i.scrollTop(Z+g-p):g<p&&i.scrollTop(Z-v.outerHeight())}else a(h),i.scrollTop(0)}else{var C=d.last();o(C);var w=C.offset().top+C.outerHeight();i.scrollTop(i.scrollTop()+w)}n.preventDefault()}else l(n)&&i.children(".highlighted").length?(u(i.children(".highlighted")),n.preventDefault()):c(n)&&e(i)}),$("#frm").on("mousedown",".combobox-result",function(e){u($(this)),e.preventDefault()}),$.fn.isInViewport=function(){var e=$(this).offset().top,t=$(window).scrollTop(),n=t+$(window).height();return e>t&&e<n},$("#frm").on("mouseenter",".combobox-result",function(){o($(this))})}function buildComboboxes(){$.each($(".combobox-container"),function(e){var t=$(this).find(".combobox");if(t.attr("spellcheck","false"),t.attr("autocomplete","false"),t.parent().addClass("combobox-wrap"),t.hasClass("combobox-strict")&&t.parent().addClass("combobox-strict-wrap"),t.parent().attr("role","combobox"),t.parent().attr("aria-haspopup","combobox"),t.attr("aria-owns","combobox-results-"+(e+1)),t.parent().attr("aria-expanded","false"),t.attr("aria-autocomplete","list"),t.attr("aria-controls","combobox-results-"+(e+1)),t.attr("aria-activedescendant",""),!$(this).children(".combobox-results-container").length){var n=$(this).find("label").attr("id");$(this).append('<div class="combobox-results-container"><ul role="listbox" aria-labeledby="'+n+'" class="combobox-results hidden" id="combobox-results-'+(e+1)+'"></ul></div>');var a=$(this).find(".combobox");a.hasClass("combobox-strict")&&addAllResultsToComboboxList(a)}})}function addAllResultsToComboboxList(e){var t=getComboboxList(e),n=getCorrespondingResults(e);$.each(t,function(e,t){n.append(getResultItemMarkup(t,e+1))})}function initFileUploads(){$("#frm").on("focus",".attachment input:file",function(){$("label[for='"+$(this).attr("id")+"']").addClass("focused")}),$("#frm").on("blur",".attachment input:file",function(){$("label[for='"+$(this).attr("id")+"']").removeClass("focused")})}function checkForDOMChanges(){observeDOM(document.getElementById("frm"),function(){initCheckedInputs(),addHTMLAttributes(),calcCheckAndRadioPlacment(),initFloatingLabelsLoaded(),buildComboboxes()})}var ctrlDown,shiftDown,tabDown;addJSFiles(),$(document).ready(function(){preventBrowserFormActions(),initInputs(),initCheckBoxesAndRadios(),initFloatingLabels(),initComboboxes(),initFileUploads(),checkForDOMChanges()});var countries=["Afghanistan","Albania","Algerie","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua og Barbuda","Argentina","Armenia","Aruba","Australia","Aserbajdsjan","Bahamas","Bahrain","Bangladesh","Barbados","Belgia","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia og Herzegovina","Botswana","Bouvetøya","Brasil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Canada","Cayman Islands","Chad","Chile","Christmas Island","Cocos (Keeling) Islands","Colombia","Cookøyene","Costa Rica","Cote D'Ivoire","Cuba","Danmark","De forente arabiske emirater","Den dominikanske republikk","Den demokratiske republikken Kongo","Den sentralafrikanske republikk","Djibouti","Dominica","Ecuador","Egypt","El Salvador","Ekvatorial-Guinea","Eritrea","Estonia","Etiopia","Falklandsøyene (Malvinas)","Færøyene","Fiji","Filippinene","Finland","France","Fransk Guyana","Fransk Polynesia","Franske sørlige territorier","Gabon","Gambia","Georgia","Ghana","Gibraltar","Hellas","Hviterussland","Grønland","Grenada","Guadeloupe","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island og Mcdonald Islands","Honduras","Hong Kong","Island","India","Indonesia","Iran","Irak","Irland","Israel","Italia","Jamaica","Japan","Jemen","Jomfruøyene (britisk)","Jomfruøyene (amerikanske)","Jordan","Kambodsja","Kamerun","Kapp Verde","Kasakhstan","Kenya","Kina","Kirgisistan","Kiribati","Komorene","Kongo","Korea","Kroatia","Kuwait","Kypros","Laos","Latvia","Libanon","Lesotho","Liberia","Libya","Liechtenstein","Litauen","Luxembourg","Macao","Madagaskar","Makedonia","Malawi","Malaysia","Maldivene","Mali","Malta","Marshalløyene","Martinique","Mauretania","Mauritius","Mayotte","Mexico","Mikronesiaføderasjonen","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Marokko","Mosambik","Myanmar","Namibia","Nauru","Nepal","Nederland","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Norge","Nord-Korea","Nord-Marianene","Ny-Caledonia","Oman","Pakistan","Palau","Panama","Papua Ny-Guinea","Paraguay","Peru","Pitcairn","Polen","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russland","Rwanda","Saint Helena","Saint Kitts og Nevis","Saint Lucia","Saint Pierre og Miquelon","Saint Vincent og Grenadinene","Samoa","San Marino","São Tomé og Príncipe","Saudi-Arabia","Senegal","Serbia","Seychellene","Sierra Leone","Singapore","Slovakia (Slovakiske Republikk)","Slovenia","Salomonøyene","Somalia","Spania","Sri Lanka","Storbritannia","Sudan","Surinam","Svalbard og Jan Mayen","Sverige","Swaziland","Sveits","Syria","Sør-Afrika","Tadsjikistan","Taiwan","Tanzania","Thailand","Togo","Tokelau","Tonga","Trinidad og Tobago","Tsjekkia","Tunisia","Turkmenistan","Turks- og Caicosøyene","Tuvalu","Tyrkia","Tyskland","Uganda","Ukraina","USAs ytre småøyer","Ungarn","USA (Amerikas forente stater)","Uruguay","Usbekistan","Vanuatu","Vatikanstaten (Holy See)","Venezuela","Vest-Sahara","Vietnam","Wallis og Futuna","Zambia","Zimbabwe","Østerrike","Øst-Timor"],countryCodeLookup={},countryNameLookup={},currentURL=window.location.href,getXMLUrlCurrentLocale=currentURL.replace("htmlViewer","formAttributes"),onSuccessCurrentLocale=function(e){var t,n=$.parseXML(e),a=n.getElementsByTagName("document_locale")[0],o=a?a.getAttribute("current_locale"):void 0;t=o?currentURL.split("/digiforms")[0]+"/Datasources/Countries/countries_"+o+".xml":currentURL.split("/digiforms")[0]+"/Datasources/Countries/countries_nb_NO.xml",getXMLData(t,function(e){var t=$.parseXML(e),n=t.getElementsByTagName("country");n.length&&(countries=[]);for(var a=0;a<n.length;a++){var o=n[a].getAttribute("name"),i=n[a].getAttribute("code");countries.push(o),countryNameLookup[i]=o,countryCodeLookup[o]=i}})};getXMLData(getXMLUrlCurrentLocale,onSuccessCurrentLocale);var observeDOM=function(){var e=window.MutationObserver||window.WebKitMutationObserver,t=window.addEventListener;return function(n,a){if(e){new e(function(e,t){(e[0].addedNodes.length||e[0].removedNodes.length)&&a()}).observe(n,{childList:!0,subtree:!0})}else t&&(n.addEventListener("DOMNodeInserted",a,!1),n.addEventListener("DOMNodeRemoved",a,!1))}}();