var ctrlDown;var shiftDown;var tabDown;var bodyPadding;addJSFiles();$(document).ready(function(){preventBrowserFormActions();initInputs();initCheckBoxesAndRadios();initFloatingLabels();initComboboxes();initFileUploads();initModals();checkForDOMChanges()});function addJSFiles(){var a=document.createElement("script");a.type="text/javascript";a.src="../form-controls/jquery.mask.min.js";$("head").append(a)}function preventBrowserFormActions(){$("#frm").attr("novalidate","novalidate")}function initGlobalKeyEventListener(){ctrlDown=false;$(document).on("keydown",function(b){var a=b.which||b.keyCode;if(a===17){ctrlDown=true}});$(document).on("keyup",function(b){var a=b.which||b.keyCode;if(a===17){ctrlDown=false}});shiftDown=false;$(document).on("keydown",function(b){var a=b.which||b.keyCode;if(a===16){shiftDown=true}});$(document).on("keyup",function(b){var a=b.which||b.keyCode;if(a===16){shiftDown=false}});tabDown=false;$(document).on("keydown",function(b){var a=b.which||b.keyCode;if(a===9){tabDown=true}});$(document).on("keyup",function(b){var a=b.which||b.keyCode;if(a===9){tabDown=false}})}function addHTMLAttributes(){$("input.numeric-text").attr("inputmode","numeric");$("input.numeric-text").attr("pattern","[0-9]*");$("input.numeric-text").attr("type","tel");$(".numeric-decimal").attr("step","0.01");$(".numeric-positive").attr("min","0")}var parseDecimalStringToFloat=function(a){return parseFloat(a.toString().replace(",","."))};var parseFloatToDecimalString=function(a){return a.toString().replace(".",",")};function initPhoneMasking(){$("input.phone:not(.phone-no, .phone-dk, .phone-se, .phone-scandinavian, .phone-nordic)").mask("+099999 00 00 00 00 00 00 00");$("input.phone-no").mask("+47 000 00 000");$("input.phone-no").attr("placeholder","+47 000 00 000");$("input.phone-se").mask("+46(0) 00-000 00 00");$("input.phone-se").attr("placeholder","+46(0) 00-000 00 00");$("input.phone-dk").mask("+45 00 00 00 00");$("input.phone-dk").attr("placeholder","+45 00 00 00 00");$("input.phone-scandinavian").mask("+00 00 00 00 00 00");$("input.phone-nordic").mask("+009 00 00 00 00 00")}function initInputs(){addHTMLAttributes();$("input.numeric-text:not(.account-mask, .vps-account-mask, .money, .money-int, .org-number-mask, .org-number-mask-se, .org-number-mask-dk, .phone, .phone-no, .phone-se, .phone-dk, .phone-nordic, .cpr-mask, .ssn-no-mask, .ssn-se-mask, .percentage, .date-mask)").mask("0#");$("input.money-int").mask("000 000 000 000 000",{reverse:true,watchDataMask:true});$("input.account-mask").mask("0000 00 00000");$("input.vps-account-mask").mask("00000 0000000");$("input.org-number-mask").mask("000 000 000");$("input.org-number-mask-se, input.cpr-mask").mask("000000-0000");$("input.org-number-mask-dk").mask("00000000");$("input.giin-number-mask").mask("ZZZZZZ.ZZZZZ.ZZ.ZZZ",{translation:{Z:{pattern:/[a-zA-Z 0123456789]/}}});$("input.ssn-no-mask").mask("000000 00000");$("input.ssn-se-mask").mask("00000000-0000");$("input.date-mask").mask("00.00.0000");$("input.date-se-mask").mask("0000.00.00");initPhoneMasking();$("input.letteral-text").mask("ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ",{translation:{Z:{pattern:/[a-zA-Z ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏàáâãäåæçèéêëìíîïÐÑÒÓÔÕÖØÙÚÛÜÝÞßðñòóôõöøùúûüýþÿ-]/}}});$.each($("input.website-mask"),function(){if($(this).val()===""){$(this).val("http://www.")}});$("input.website-mask").mask("httpS://www.ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ",{translation:{Z:{pattern:/[\w@\-.+/]/,recursive:true},S:{pattern:/[s]/,optional:true}}});var b=function(j){var i=["0 000 000 000 000d","0 000 000 000 000d99"];return(j.indexOf(",")>0||j.indexOf(".")>0)?i[1]:i[0]},e={reverse:true,translation:{d:{pattern:/[,.]/,optional:true},},onKeyPress:function(l,k,j,i){j.mask(b.apply({},arguments),i)}};$("input.money").mask(b,e);$("input.percentage").mask("HT9,00",{translation:{H:{pattern:/[1]/,optional:true},T:{pattern:/[0-9]/,optional:true}},});$("#frm").on("input",".percentage",function(){if(parseDecimalStringToFloat($(this).val())>100){$(this).val(100)}else{if($(this).val().indexOf("0")===0&&$(this).val().indexOf(",")===2){$(this).val($(this).val().substring(1))}}});$("#frm").on("change",".percentage",function(){var i=$(this).val();if(i.charAt(i.length-1)===","){$(this).val(i.substring(0,i.length-1))}});$("#frm").on("keydown",".percentage, .money",function(n){var l=n.which||n.keyCode;var o=parseDecimalStringToFloat($(this).val());var m=0.01;var k="0,00";var i=100;var j=2;if($(this).hasClass("money")){i=9999999999999.99;o=parseDecimalStringToFloat($(this).cleanVal())}if(l===38&&($(this).val()===""||o<i)){if($(this).val()===""){$(this).val($(this).masked(parseFloatToDecimalString(k)))}else{$(this).val($(this).masked(parseFloatToDecimalString((o+m).toFixed(j))))}n.preventDefault();$(this).trigger("input")}else{if(l===40&&($(this).val()===""||o>0)){if($(this).val()===""){$(this).val($(this).masked(parseFloatToDecimalString(k)))}else{$(this).val($(this).masked(parseFloatToDecimalString((o-m).toFixed(j))))}n.preventDefault();$(this).trigger("input")}}});$("#frm").on("keydown",".money",function(i){if(!g(i)&&$(this).val().indexOf(",")>0&&$(this).val().indexOf(",")===($(this).val().length-3)&&$(this).prop("selectionStart")===$(this).prop("selectionEnd")&&$(this).prop("selectionStart")>=$(this).val().length-2){i.preventDefault()}});$("#frm").on("input change",".money",function(l){$(this).val($(this).val().replace(".",","));if($(this).val()!=="0"&&$(this).val()!=="0,0"&&$(this).val()!=="0,00"){var m=0;for(var k=0;k<$(this).val().length;k++){if($(this).val().charAt(k)==="0"&&k!==$(this).val().length-1&&$(this).val().charAt(k+1)!==","||$(this).val().charAt(k)===" "){m++}else{break}}if(m>0){var j=$(this).val().substring(m);$(this).val(j);if(l.type==="input"){$(this).prop("selectionStart",1);$(this).prop("selectionEnd",1)}}}});$("#frm").on("change",".money",function(i){if($(this).val().length>0){if($(this).val().indexOf(",")<0){$(this).val($(this).val()+",00")}else{if($(this).val().indexOf(",")===$(this).val().length-1){$(this).val($(this).val()+"00")}else{if($(this).val().indexOf(",")===$(this).val().length-2){$(this).val($(this).val()+"0")}}}}else{$(this).val("0,00")}});var a=function(k,j,i){if(((i||!shiftDown)&&k>=48&&k<=57)||(k>=96&&k<=105)||(j!=undefined&&$.inArray(k,j)>-1)){return true}return false};var d=function(j){var i=j.which||j.keyCode;if(i===46){return true}return false};var h=function(j){var i=j.which||j.keyCode;if(i===8){return true}return false};var c=function(i){return h(i)||d(i)};var g=function(j){if(ctrlDown){return true}var i=j.which||j.keyCode;if(!c(j)&&i!=9&&i!=13&&i!=16&&i!=17&&i!=19&&(i<35||i>40)){return false}return true};var f=function(i){return i.prop("selectionEnd")>i.prop("selectionStart")};$("#frm").on("keydown","input.numeric-decimal",function(j){var i=j.which||j.keyCode;if(!g(j)&&!a(i,[188,190],false)){j.preventDefault()}});$("#frm").on("keyup","input.prevent-select-on-tab",function(j){var i=j.which||j.keyCode;if(i===9){$(this).prop("selectionStart",$(this).prop("selectionEnd"))}});$("#frm").on("focus","input.prevent-select-on-tab",function(i){if(tabDown||$(this).prop("selectionStart")!=$(this).prop("selectionEnd")){$(this).prop("selectionStart",$(this).prop("selectionEnd"))}})}function initCheckBoxesAndRadios(){$("#frm").on("click",".control-row .label_control",function(a){if(a.target.localName!="input"){var b=$(this).find("input");if(b.length){b.click();b.focus()}}});$("#frm").on("change",".control-row .label_control input:checkbox",function(){toggleCheck($(this))});$("#frm").on("change",".control-row .label_control input:radio",function(){var a=$(this).closest("fieldset").find("input:radio");$.each(a,function(){toggleCheck($(this))})});$("#frm").on("focus",".control-row .label_control input",function(){$(this).parent().parent().addClass("focused")});$("#frm").on("blur",".control-row .label_control input",function(){$(this).parent().parent().removeClass("focused")});$("#frm").on("change",".control-row .label_control input",function(){if($(this).is(":checked")){$(this).closest("fieldset").parent().find(".digiforms_validation_message:not(.file-error):first").hide()}});initCheckedInputs();calcCheckAndRadioPlacment();$(window).resize(function(){calcCheckAndRadioPlacment()})}function toggleCheck(a){if(a.is(":checked")){a.closest(".label_control").addClass("checked")}else{a.closest(".label_control").removeClass("checked")}}function initCheckedInputs(){var b=$(".label_control input:checkbox:checked");$.each(b,function(){toggleCheck($(this))});var a=$(".label_control input:radio");$.each(a,function(){toggleCheck($(this))})}function calcCheckAndRadioPlacment(){$.each($(".control-row .label_control input"),function(){var b=$(this).parent();var a=b.siblings(".label_text");var c=parseFloat(a.css("font-size").replace("px",""));if(b.height()<=a.height()&&a.height()>=2*c){b.parent().addClass("align-top")}else{if(b.parent().hasClass("align-top")){b.parent().removeClass("align-top")}}})}function initFloatingLabels(){initFloatingLabelsLoaded();$("#frm").on("input",".label-float .input-field-alt",function(){showLabel($(this))});$("#frm").on("keyup",".label-float .input-field-alt",function(){hideLabel($(this))});$(window).resize(function(){$.each($(".label-float .input-field-alt"),function(){togglePaddingTop($(this))})})}function initFloatingLabelsLoaded(){var b=function(c){if(!showLabel(c)){hideLabel(c)}};var a=function(d){var c=getLabel(d).find("label").text();if(d.attr("placeholder")!=c){d.attr("placeholder",c)}};$.each($(".label-float .input-field-alt"),function(){b($(this));a($(this));togglePaddingTop($(this))})}function showLabel(b){var a=getLabel(b);if(b.val().length){a.removeClass("hidden");togglePaddingTop(b);return true}return false}function hideLabel(b){var a=getLabel(b);if(b.val().length===0){if(!a.hasClass("hidden")){a.addClass("hidden")}togglePaddingTop(b);return true}return false}function getLabel(a){return a.parent().parent()}function togglePaddingTop(e){var d=getLabel(e);if(d.hasClass("hidden")){e.attr("style","padding-top: calc("+e.css("padding-bottom")+" + 3px) !important")}else{var a;if(d.find("label").height()===0){var c=parseFloat(d.find("label").css("padding-top").replace("px",""));var b=parseFloat(d.find("label").css("font-size").replace("px",""));a=c+b+3}else{a=d.find("label").outerHeight()}if(e.css("padding-top")!==a+"px"){$(e).attr("style","padding-top: "+a+"px !important")}}}function getXMLData(a,b){$.ajax({type:"GET",url:a,dataType:"text",cache:false,xhr:function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest()},success:function(c){b(c)}})}var countries=["Afghanistan","Albania","Algerie","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua og Barbuda","Argentina","Armenia","Aruba","Australia","Aserbajdsjan","Bahamas","Bahrain","Bangladesh","Barbados","Belgia","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia og Herzegovina","Botswana","Bouvetøya","Brasil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Canada","Cayman Islands","Chad","Chile","Christmas Island","Cocos (Keeling) Islands","Colombia","Cookøyene","Costa Rica","Cote D'Ivoire","Cuba","Danmark","De forente arabiske emirater","Den dominikanske republikk","Den demokratiske republikken Kongo","Den sentralafrikanske republikk","Djibouti","Dominica","Ecuador","Egypt","El Salvador","Ekvatorial-Guinea","Eritrea","Estonia","Etiopia","Falklandsøyene (Malvinas)","Færøyene","Fiji","Filippinene","Finland","France","Fransk Guyana","Fransk Polynesia","Franske sørlige territorier","Gabon","Gambia","Georgia","Ghana","Gibraltar","Hellas","Hviterussland","Grønland","Grenada","Guadeloupe","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island og Mcdonald Islands","Honduras","Hong Kong","Island","India","Indonesia","Iran","Irak","Irland","Israel","Italia","Jamaica","Japan","Jemen","Jomfruøyene (britisk)","Jomfruøyene (amerikanske)","Jordan","Kambodsja","Kamerun","Kapp Verde","Kasakhstan","Kenya","Kina","Kirgisistan","Kiribati","Komorene","Kongo","Korea","Kroatia","Kuwait","Kypros","Laos","Latvia","Libanon","Lesotho","Liberia","Libya","Liechtenstein","Litauen","Luxembourg","Macao","Madagaskar","Makedonia","Malawi","Malaysia","Maldivene","Mali","Malta","Marshalløyene","Martinique","Mauretania","Mauritius","Mayotte","Mexico","Mikronesiaføderasjonen","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Marokko","Mosambik","Myanmar","Namibia","Nauru","Nepal","Nederland","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Norge","Nord-Korea","Nord-Marianene","Ny-Caledonia","Oman","Pakistan","Palau","Panama","Papua Ny-Guinea","Paraguay","Peru","Pitcairn","Polen","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russland","Rwanda","Saint Helena","Saint Kitts og Nevis","Saint Lucia","Saint Pierre og Miquelon","Saint Vincent og Grenadinene","Samoa","San Marino","São Tomé og Príncipe","Saudi-Arabia","Senegal","Serbia","Seychellene","Sierra Leone","Singapore","Slovakia (Slovakiske Republikk)","Slovenia","Salomonøyene","Somalia","Spania","Sri Lanka","Storbritannia","Sudan","Surinam","Svalbard og Jan Mayen","Sverige","Swaziland","Sveits","Syria","Sør-Afrika","Tadsjikistan","Taiwan","Tanzania","Thailand","Togo","Tokelau","Tonga","Trinidad og Tobago","Tsjekkia","Tunisia","Turkmenistan","Turks- og Caicosøyene","Tuvalu","Tyrkia","Tyskland","Uganda","Ukraina","USAs ytre småøyer","Ungarn","USA (Amerikas forente stater)","Uruguay","Usbekistan","Vanuatu","Vatikanstaten (Holy See)","Venezuela","Vest-Sahara","Vietnam","Wallis og Futuna","Zambia","Zimbabwe","Østerrike","Øst-Timor"];var countryCodeLookup={};var countryNameLookup={};var currentURL=window.location.href;var getXMLUrlCurrentLocale=currentURL.replace("htmlViewer","formAttributes");var onSuccessCurrentLocale=function(e){var c=$.parseXML(e);var b=c.getElementsByTagName("document_locale")[0];var f=b?b.getAttribute("current_locale"):undefined;var a;if(f){a=currentURL.split("/digiforms")[0]+"/Datasources/Countries/countries_"+f+".xml"}else{a=currentURL.split("/digiforms")[0]+"/Datasources/Countries/countries_nb_NO.xml"}var d=function(m){var j=$.parseXML(m);var k=j.getElementsByTagName("country");if(k.length){countries=[]}for(var h=0;h<k.length;h++){var l=k[h].getAttribute("name");var g=k[h].getAttribute("code");countries.push(l);countryNameLookup[g]=l;countryCodeLookup[l]=g}};getXMLData(a,d)};getXMLData(getXMLUrlCurrentLocale,onSuccessCurrentLocale);function getComboboxList(d){var c=["Banan","Eple","Plomme"];var b=["Offentlig myndighet","Bank, finans og forsikring","Juridiske tjenester","IT og telekommunikasjon","Eiendom","Media, avis, markedsføring og salgstjenester","Butikk og varehandel","Reiseliv / hotell","Industri","Bygg og anlegg","Import og eksport av varer og tjenester","Håndverkertjenester","Kunst- og antikvitetshandel","Transport og logistikk","Restauranter, mat og uteliv","Urmaker / gullsmed","Bil, kjøretøy og verkstedstjenester","Tro og religiøse-, frivillige-, veldedige-, humanitære- og ideelle organisasjoner","Helse / omsorg / medisin og biologi / dyrehelse","Jord- / skogbruk, fiske og matproduksjon","Kultur og idrett","Service og sikkerhet","Skole, fritid, undervisning og forskning","Arkitektur og interiør","Økonomi og regnskap"];var a=d.attr("class").substring(d.attr("class").indexOf("combobox-")+"combobox-".length).split(" ")[0];return d.hasClass("combobox-countries")?countries:(d.hasClass("combobox-sector")?b:customComboBoxlists&&customComboBoxlists[a]?customComboBoxlists[a]:c)}function getCorrespondingResults(a){return a.parent().siblings(".combobox-results-container").children(".combobox-results")}function getResultItemMarkup(b,a){return'<li role="option" aira-selected="false" class="combobox-result" id="combobox-result-'+a+'">'+b+"</li>"}function initComboboxes(){buildComboboxes();$("#frm").on("input","input.combobox",function(){if(!$(this).is(":focus")){return}var o=$(this).val().toLowerCase();var r=getCorrespondingResults($(this));r.empty();if(o.length){var p=getComboboxList($(this));var n=[];var m=function(u,t,s){return u.substring(0,t)+'<span class="case-match">'+u.substring(t,s)+"</span>"+u.substring(s,u.length)};var q=0;$.each(p,function(t,u){var s=u.toLowerCase().indexOf(o);if(s===0){r.append(getResultItemMarkup(m(u,0,o.length),++q))}else{if(s>0){n.push(m(u,s,s+o.length))}}});if(!r.children().length){$.each(n,function(s,t){r.append(getResultItemMarkup(t,++q))})}if($(this).hasClass("combobox-strict")){f(getCorrespondingResults($(this)).children().first())}}else{addAllResultsToComboboxList($(this))}c(r)});function b(m){if(!m.hasClass("hidden")){m.scrollTop(0);m.addClass("hidden");m.parent().siblings(".combobox-wrap").attr("aria-expanded","false");j(m);return true}return false}function e(m){if(m.children().length){m.parent().siblings(".combobox-wrap").attr("aria-expanded","true");m.removeClass("hidden");return true}return false}function c(m){if(!e(m)){b(m)}}$("#frm").on("blur","input.combobox",function(){var n=getCorrespondingResults($(this));if($(this).hasClass("combobox-strict")){var m=n.children(".highlighted").first();if(m.length){l(m)}else{if($.inArray($(this).val(),getComboboxList($(this)))<0){h($(this))}}}b(n)});$("#frm").on("focus","input.combobox",function(){e(getCorrespondingResults($(this)))});function g(m){if(m&&m.length){m.attr("aria-selected","false");m.removeClass("highlighted");m.closest(".combobox-container").find(".combobox").attr("aria-activedescendant","");return true}return false}function f(m){g(m.siblings(".highlighted"));if(m&&m.length){m.attr("aria-selected","true");m.addClass("highlighted");m.closest(".combobox-container").find(".combobox").attr("aria-activedescendant",m.attr("id"));return true}return false}function j(m){if(!g(m.children(".highlighted"))){m.closest(".combobox-container").find(".combobox").attr("aria-activedescendant","")}}$("#frm").on("click","input.combobox",function(){j(getCorrespondingResults($(this)))});$("#frm").on("keydown","input.combobox",function(t){var z=getCorrespondingResults($(this));if(!z.hasClass("hidden")){if(d(t)){var w=z.children(".combobox-result");var m=w.filter(".highlighted");if(m.length){var q=m.next();if(f(q)){var x=z.offset().top;var y=z.offset().top+parseFloat(z.css("max-height").replace("px",""));var v=q.offset().top;var s=q.offset().top+q.outerHeight();var o=z.scrollTop();if(v>y||v<x){z.scrollTop(o+v-x)}else{if(s>y){z.scrollTop(o+q.outerHeight())}}}else{g(m);z.scrollTop(0)}}else{var p=w.first();f(p);if(z.scrollTop()>0){z.scrollTop(p.offset().top)}}t.preventDefault()}else{if(k(t)){t.preventDefault();var w=z.children(".combobox-result");var m=w.filter(".highlighted");if(m.length){var n=m.prev();if(f(n)){var x=z.offset().top;var y=z.offset().top+parseFloat(z.css("max-height").replace("px",""));var v=n.offset().top;var s=n.offset().top+n.outerHeight();var o=z.scrollTop();if(v<0||s>y){z.scrollTop(o+v-x)}else{if(v<x){z.scrollTop(o-n.outerHeight())}}}else{g(m);z.scrollTop(0)}}else{var r=w.last();f(r);var u=r.offset().top+r.outerHeight();z.scrollTop(z.scrollTop()+u)}t.preventDefault()}else{if(a(t)&&z.children(".highlighted").length){l(z.children(".highlighted"));t.preventDefault()}else{if(i(t)){b(z)}}}}}else{if(d(t)){if($(this).val()===""){addAllResultsToComboboxList($(this))}e(z)}}});function d(m){return m.which===40}function k(m){return m.which===38}function a(m){return m.which===13}function i(m){return m.which===27}$("#frm").on("mousedown",".combobox-result",function(m){l($(this));m.preventDefault()});function l(n){var o=n.closest(".combobox-container").find("input.combobox");o.val(n.text());if(o.hasClass("combobox-countries")){o.attr("data-value",countryCodeLookup[o.val()])}var p=n.parent();b(p);var m=n.closest(".combobox-container").find("label");if(!o.isInViewport()){$("html, body").animate({scrollTop:m.offset().top},100)}p.empty();o.change()}function h(m){m.val("");m.removeAttr("data-value");addAllResultsToComboboxList(m);m.change()}$.fn.isInViewport=function(){var n=$(this).offset().top;var m=$(window).scrollTop();var o=m+$(window).height();return n>m&&n<o};$("#frm").on("mouseenter",".combobox-result",function(){f($(this))})}function buildComboboxes(){$.each($(".combobox-container"),function(a){var d=$(this).find(".combobox");d.attr("spellcheck","false");d.attr("autocomplete","off");d.attr("list","autocompleteOff");d.parent().addClass("combobox-wrap");if(d.hasClass("combobox-strict")){d.parent().addClass("combobox-strict-wrap")}d.parent().attr("role","combobox");d.parent().attr("aria-haspopup","combobox");d.attr("aria-owns","combobox-results-"+(a+1));d.parent().attr("aria-expanded","false");d.attr("aria-autocomplete","list");d.attr("aria-controls","combobox-results-"+(a+1));d.attr("aria-activedescendant","");if(!$(this).children(".combobox-results-container").length){var c=$(this).find("label").attr("id");$(this).append('<div class="combobox-results-container"><ul role="listbox" aria-labeledby="'+c+'" class="combobox-results hidden" id="combobox-results-'+(a+1)+'"></ul></div>');var b=$(this).find(".combobox");addAllResultsToComboboxList(b)}})}function addAllResultsToComboboxList(c){var a=getComboboxList(c);var b=getCorrespondingResults(c);b.empty();$.each(a,function(d,e){b.append(getResultItemMarkup(e,(d+1)))})}function initFileUploads(){$("#frm").on("focus",".attachment input:file",function(){$("label[for='"+$(this).attr("id")+"']").addClass("focused")});$("#frm").on("blur",".attachment input:file",function(){$("label[for='"+$(this).attr("id")+"']").removeClass("focused")})}function initModals(){bodyPadding=$("body").css("padding");bodyPadding=bodyPadding.substring(0,bodyPadding.length-2);initModalARIA();initModalEvents()}function initModalARIA(){$(".modal-container.hidden").attr("aria-expanded","false");var a=$(".modal-container:not(.hidden)");a.attr("aria-expanded","true");if(a.length>0){setScrollBarOffset()}$.each($("button.open-modal-btn"),function(b){var d=b+1;var c=$(".modal-container:eq("+(d-1)+")");$(this).attr("aria-controls",c.attr("id"))});$.each($(".modal-container"),function(b){var c=$(this).find(".btn-close");c.attr("aria-controls",$(this).attr("id"));if($("html").attr("lang").toLowerCase()==="se"){c.attr("aria-label","Stäng")}else{if($("html").attr("lang").toLowerCase()==="en"){c.attr("aria-label","Close")}else{if($("html").attr("lang").toLowerCase()==="da"){c.attr("aria-label","Luk")}else{c.attr("aria-label","Lukk")}}}})}function initModalEvents(){$(".modal-container.hidden").attr("aria-expanded","false");$.each($("button.open-modal-btn"),function(b){var d=b+1;var c=$("#modal-container-"+d);$(this).attr("aria-controls",c.attr("id"))});$("#frm").on("keydown",".modal-container button:last",function(c){var b=$(this).closest(".modal-container");if(!b.hasClass("hidden")&&(c.which===9&&!c.shiftKey)){c.preventDefault();b.find("button:first").focus()}});$("#frm").on("keydown",".modal-container button:first",function(c){var b=$(this).closest(".modal-container");if(!b.hasClass("hidden")&&(c.which===9&&c.shiftKey)){c.preventDefault();b.find("button:last").focus()}});$(document).on("keydown",function(b){var c=$(".modal-container:not(.hidden)");if(c.length){if(b.which===9&&!c.find("button:focus").length){b.preventDefault();c.find("button:first").focus()}else{if(b.which===27){a(c)}}}});var a=function(b){b.attr("aria-expanded","false");b.attr("aria-hidden","true");b.addClass("hidden");$("body").css("overflow","scroll");$("body").css("padding-right",bodyPadding+"px")};$("#frm").on("click",".modal-container .btn-close",function(){a($(this).closest(".modal-container"))});$("#frm").on("click","button.open-modal-btn",function(){var b=$("#"+$(this).attr("aria-controls"));b.removeClass("hidden");b.attr("aria-expanded","true");b.attr("aria-hidden","false");b.scrollTop(0);setScrollBarOffset()})}function setScrollBarOffset(){var a=getScrollbarWidth()+parseInt(bodyPadding);$("body").css("padding-right",a+"px");$("body").css("overflow","hidden")}function getScrollbarWidth(){var d=document.createElement("div");d.style.visibility="hidden";d.style.width="100px";document.body.appendChild(d);var b=d.offsetWidth;d.style.overflow="scroll";var a=document.createElement("div");a.style.width="100%";d.appendChild(a);var c=a.offsetWidth;d.parentNode.removeChild(d);return b-c}function checkForDOMChanges(){observeDOM(document.getElementById("frm"),function(){initCheckedInputs();addHTMLAttributes();calcCheckAndRadioPlacment();initFloatingLabelsLoaded();buildComboboxes();initModalARIA()})}var observeDOM=(function(){var b=window.MutationObserver||window.WebKitMutationObserver,a=window.addEventListener;return function(c,e){if(b){var d=new b(function(f,g){if(f[0].addedNodes.length||f[0].removedNodes.length){e()}});d.observe(c,{childList:true,subtree:true})}else{if(a){c.addEventListener("DOMNodeInserted",e,false);c.addEventListener("DOMNodeRemoved",e,false)}}}})();
